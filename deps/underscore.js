(function(){var c=this;var e=c._;var g=function(h){this._wrapped=h};var f=typeof StopIteration!=="undefined"?StopIteration:"__break__";var d=c._=function(h){return new g(h)};if(typeof exports!=="undefined"){exports._=d}d.VERSION="0.4.3";d.each=function(q,o,n){var j=0;try{if(q.forEach){q.forEach(o,n)}else{if(q.length){for(var m=0,h=q.length;m<h;m++){o.call(n,q[m],m,q)}}else{for(var k in q){if(Object.prototype.hasOwnProperty.call(q,k)){o.call(n,q[k],k,q)}}}}}catch(p){if(p!=f){throw p}}return q};d.map=function(m,k,j){if(m&&m.map){return m.map(k,j)}var h=[];d.each(m,function(p,n,o){h.push(k.call(j,p,n,o))});return h};d.reduce=function(m,h,k,j){if(m&&m.reduce){return m.reduce(d.bind(k,j),h)}d.each(m,function(p,n,o){h=k.call(j,h,p,n,o)});return h};d.reduceRight=function(m,h,k,j){if(m&&m.reduceRight){return m.reduceRight(d.bind(k,j),h)}var n=d.clone(d.toArray(m)).reverse();d.each(n,function(p,o){h=k.call(j,h,p,o,m)});return h};d.detect=function(m,k,j){var h;d.each(m,function(p,n,o){if(k.call(j,p,n,o)){h=p;d.breakLoop()}});return h};d.select=function(m,k,j){if(m.filter){return m.filter(k,j)}var h=[];d.each(m,function(p,n,o){k.call(j,p,n,o)&&h.push(p)});return h};d.reject=function(m,k,j){var h=[];d.each(m,function(p,n,o){!k.call(j,p,n,o)&&h.push(p)});return h};d.all=function(m,k,j){k=k||d.identity;if(m.every){return m.every(k,j)}var h=true;d.each(m,function(p,n,o){if(!(h=h&&k.call(j,p,n,o))){d.breakLoop()}});return h};d.any=function(m,k,j){k=k||d.identity;if(m.some){return m.some(k,j)}var h=false;d.each(m,function(p,n,o){if(h=k.call(j,p,n,o)){d.breakLoop()}});return h};d.include=function(k,j){if(d.isArray(k)){return d.indexOf(k,j)!=-1}var h=false;d.each(k,function(m){if(h=m===j){d.breakLoop()}});return h};d.invoke=function(j,k){var h=d.toArray(arguments).slice(2);return d.map(j,function(m){return(k?m[k]:m).apply(m,h)})};d.pluck=function(j,h){return d.map(j,function(k){return k[h]})};d.max=function(m,k,j){if(!k&&d.isArray(m)){return Math.max.apply(Math,m)}var h={computed:-Infinity};d.each(m,function(q,n,p){var o=k?k.call(j,q,n,p):q;o>=h.computed&&(h={value:q,computed:o})});return h.value};d.min=function(m,k,j){if(!k&&d.isArray(m)){return Math.min.apply(Math,m)}var h={computed:Infinity};d.each(m,function(q,n,p){var o=k?k.call(j,q,n,p):q;o<h.computed&&(h={value:q,computed:o})});return h.value};d.sortBy=function(k,j,h){return d.pluck(d.map(k,function(o,m,n){return{value:o,criteria:j.call(h,o,m,n)}}).sort(function(p,o){var n=p.criteria,m=o.criteria;return n<m?-1:n>m?1:0}),"value")};d.sortedIndex=function(o,n,k){k=k||d.identity;var h=0,m=o.length;while(h<m){var j=(h+m)>>1;k(o[j])<k(n)?h=j+1:m=j}return h};d.toArray=function(h){if(!h){return[]}if(d.isArray(h)){return h}return d.map(h,function(j){return j})};d.size=function(h){return d.toArray(h).length};d.first=function(h){return h[0]};d.last=function(h){return h[h.length-1]};d.compact=function(h){return d.select(h,function(j){return !!j})};d.flatten=function(h){return d.reduce(h,[],function(j,k){if(d.isArray(k)){return j.concat(d.flatten(k))}j.push(k);return j})};d.without=function(j){var h=j.slice.call(arguments,0);return d.select(j,function(k){return !d.include(h,k)})};d.uniq=function(j,h){return d.reduce(j,[],function(k,n,m){if(0==m||(h?d.last(k)!=n:!d.include(k,n))){k.push(n)}return k})};d.intersect=function(j){var h=d.toArray(arguments).slice(1);return d.select(d.uniq(j),function(k){return d.all(h,function(m){return d.indexOf(m,k)>=0})})};d.zip=function(){var h=d.toArray(arguments);var m=d.max(d.pluck(h,"length"));var k=new Array(m);for(var j=0;j<m;j++){k[j]=d.pluck(h,String(j))}return k};d.indexOf=function(j,h){if(j.indexOf){return j.indexOf(h)}for(i=0,l=j.length;i<l;i++){if(j[i]===h){return i}}return -1};d.lastIndexOf=function(k,j){if(k.lastIndexOf){return k.lastIndexOf(j)}var h=k.length;while(h--){if(k[h]===j){return h}}return -1};d.bind=function(k,j){j=j||c;var h=d.toArray(arguments).slice(2);return function(){var m=h.concat(d.toArray(arguments));return k.apply(j,m)}};d.bindAll=function(){var h=d.toArray(arguments);var j=h.pop();d.each(h,function(k){j[k]=d.bind(j[k],j)})};d.delay=function(j,k){var h=d.toArray(arguments).slice(2);return setTimeout(function(){return j.apply(j,h)},k)};d.defer=function(h){return d.delay.apply(d,[h,1].concat(d.toArray(arguments).slice(1)))};d.wrap=function(h,j){return function(){var k=[h].concat(d.toArray(arguments));return j.apply(j,k)}};d.compose=function(){var h=d.toArray(arguments);return function(){for(var j=h.length-1;j>=0;j--){arguments=[h[j].apply(this,arguments)]}return arguments[0]}};d.keys=function(h){return d.map(h,function(k,j){return j})};d.values=function(h){return d.map(h,d.identity)};d.extend=function(h,k){for(var j in k){h[j]=k[j]}return h};d.clone=function(h){if(d.isArray(h)){return h.slice(0)}return d.extend({},h)};d.isEqual=function(j,h){if(j===h){return true}var n=typeof(j),p=typeof(h);if(n!=p){return false}if(j==h){return true}if(j.isEqual){return j.isEqual(h)}if(n!=="object"){return false}var k=d.keys(j),o=d.keys(h);if(k.length!=o.length){return false}for(var m in j){if(!d.isEqual(j[m],h[m])){return false}}return true};d.isEmpty=function(h){return(d.isArray(h)?h:d.values(h)).length==0};d.isElement=function(h){return !!(h&&h.nodeType==1)};d.isArray=function(h){return Object.prototype.toString.call(h)=="[object Array]"};d.isFunction=function(h){return Object.prototype.toString.call(h)=="[object Function]"};d.isUndefined=function(h){return typeof h=="undefined"};d.noConflict=function(){c._=e;return this};d.identity=function(h){return h};d.breakLoop=function(){throw f};var b=0;d.uniqueId=function(h){var j=b++;return h?h+j:j};d.functions=function(){var j=[];for(var h in d){if(Object.prototype.hasOwnProperty.call(d,h)){j.push(h)}}return d.without(j,"VERSION","prototype","noConflict").sort()};d.template=function(k,j){var h=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+k.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return j?h(j):h};d.forEach=d.each;d.foldl=d.inject=d.reduce;d.foldr=d.reduceRight;d.filter=d.select;d.every=d.all;d.some=d.any;d.methods=d.functions;var a=function(j,h){return h?d(j).chain():j};d.each(d.functions(),function(h){g.prototype[h]=function(){Array.prototype.unshift.call(arguments,this._wrapped);return a(d[h].apply(d,arguments),this._chain)}});d.each(["pop","push","reverse","shift","sort","splice","unshift"],function(h){g.prototype[h]=function(){Array.prototype[h].apply(this._wrapped,arguments);return a(this._wrapped,this._chain)}});d.each(["concat","join","slice"],function(h){g.prototype[h]=function(){return a(Array.prototype[h].apply(this._wrapped,arguments),this._chain)}});g.prototype.chain=function(){this._chain=true;return this};g.prototype.value=function(){return this._wrapped}})();